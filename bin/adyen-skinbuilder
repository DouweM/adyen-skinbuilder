#!/usr/bin/env ruby

require File.expand_path(File.dirname(__FILE__) + "/../lib/adyen-skinbuilder/server")
require 'vegas'

opts = if (skins = ARGV.last) && File.directory?(skins)
  if Adyen::SkinBuilder.is_skin?(skins)
    {
      :skins => File.dirname(skins),
      :launch_path => "/#{File.basename(skins)}"
    }
  else
    {
      :skins => skins
    }
  end
end

Vegas::Runner.new(Adyen::SkinBuilder::Server, 'adyen-skinbuilder', opts)
