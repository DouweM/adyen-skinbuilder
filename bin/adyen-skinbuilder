#!/usr/bin/env ruby

require File.expand_path(File.dirname(__FILE__) + "/../lib/adyen-skinbuilder/server")
require 'vegas'

opts = {}


if (skins = ARGV.last) && File.directory?(skins)
  opts[:skins_directory] = skins

  begin
    skin = Adyen::Admin::Skin.new(:path => skins) #auto launch skin
    opts[:launch_path] = "/#{skin.code}"
  rescue ArgumentError
  end
end

Vegas::Runner.new(Adyen::SkinBuilder::Server, 'adyen-skinbuilder', opts)
